<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-blog-post-tsx.4693e37b244965d2842d.css">@import url(https://fonts.googleapis.com/css?family=Nunito);@import url(https://use.fontawesome.com/releases/v5.5.0/css/all.css);.blog-post-module--pattern--21yGm{background:repeating-linear-gradient(-45deg,#36c7f3,#36c7f3 10px,#3dcaf5 0,#3dcaf5 20px)}.blog-post-module--separatorBottomDark--3bOfd,.blog-post-module--separatorTopDark--Wpqct{display:block;height:10px;border-top:1px solid rgba(17,17,17,.2);margin:10px 0}.blog-post-module--separatorTopLight--39fTF{display:block;height:10px;border-top:1px solid hsla(0,0%,100%,.2);margin:10px 0}.blog-post-module--separatorBottomLight--340P2{display:block;height:10px;border-bottom:1px solid hsla(0,0%,100%,.2);margin-bottom:10px}.blog-post-module--contentContainer--1x_eD{padding:15px}.blog-post-module--postContainer--ggIbM img{width:100%}.blog-post-module--postContainer--ggIbM h1,.blog-post-module--postContainer--ggIbM h2,.blog-post-module--postContainer--ggIbM h3{margin-top:25px}.blog-post-module--postTitle--3IOzu{text-align:center}.blog-post-module--postTitle--3IOzu h1{margin:15px 0}.blog-post-module--postMetadata--1y-Hj{display:flex;justify-content:space-between}.blog-post-module--postMetadata--1y-Hj a{color:#36c7f3}.blog-post-module--postMetadata--1y-Hj a:hover{color:#474747}.blog-post-module--author--1ftr1{flex-grow:1}.blog-post-module--postContent--38jG5,.blog-post-module--postContent--38jG5 p{text-align:left;line-height:35px;font-size:21px}.blog-post-module--postContent--38jG5 pre{font-size:15px}ul.blog-post-module--tagsList--2q3wX{list-style-type:none}ul.blog-post-module--tagsList--2q3wX li{display:inline-block}.Page-module--pattern--2OMjD{background:repeating-linear-gradient(-45deg,#36c7f3,#36c7f3 10px,#3dcaf5 0,#3dcaf5 20px)}.Page-module--separatorBottomDark--3Z-pL,.Page-module--separatorTopDark--1PJCx{display:block;height:10px;border-top:1px solid rgba(17,17,17,.2);margin:10px 0}.Page-module--separatorTopLight--18HRW{display:block;height:10px;border-top:1px solid hsla(0,0%,100%,.2);margin:10px 0}.Page-module--separatorBottomLight--12LAs{display:block;height:10px;border-bottom:1px solid hsla(0,0%,100%,.2);margin-bottom:10px}.Page-module--pageInnerContainer--3yRDU{margin-left:calc(25% + 100px);margin-right:50px}@media only screen and (max-width:1026px){.Page-module--pageInnerContainer--3yRDU{margin:0 auto}}.Banner-module--pattern--30-Rm{background:repeating-linear-gradient(-45deg,#36c7f3,#36c7f3 10px,#3dcaf5 0,#3dcaf5 20px)}.Banner-module--separatorBottomDark--1VDp2,.Banner-module--separatorTopDark--1c1VX{display:block;height:10px;border-top:1px solid rgba(17,17,17,.2);margin:10px 0}.Banner-module--separatorTopLight--2hymc{display:block;height:10px;border-top:1px solid hsla(0,0%,100%,.2);margin:10px 0}.Banner-module--separatorBottomLight--1HHq1{display:block;height:10px;border-bottom:1px solid hsla(0,0%,100%,.2);margin-bottom:10px}.Banner-module--bannerContainer--2kfC_{width:25%;min-width:250px;padding:25px;display:flex;flex-direction:column;min-height:100vh;position:fixed}@media only screen and (max-width:1026px){.Banner-module--bannerContainer--2kfC_{display:none}}.Footer-module--pattern--7s7q6{background:repeating-linear-gradient(-45deg,#36c7f3,#36c7f3 10px,#3dcaf5 0,#3dcaf5 20px)}.Footer-module--separatorBottomDark--1nsn2,.Footer-module--separatorTopDark--2PN15{display:block;height:10px;border-top:1px solid rgba(17,17,17,.2);margin:10px 0}.Footer-module--separatorTopLight--2adox{display:block;height:10px;border-top:1px solid hsla(0,0%,100%,.2);margin:10px 0}.Footer-module--separatorBottomLight--278Mg{display:block;height:10px;border-bottom:1px solid hsla(0,0%,100%,.2);margin-bottom:10px}.Footer-module--footerContainer--6amLz{background-color:#36c7f3;display:block}.Footer-module--footerContainer--6amLz a{color:#474747}.Footer-module--footerContainer--6amLz a:hover{color:#fff}.Footer-module--footerInnerContainer--3s6kB{display:flex;justify-content:space-between;padding-top:10px}.Footer-module--footerSocialIconsItem--3ocE0{display:inline;margin-left:10px}.Header-module--pattern--2EFLT{background:repeating-linear-gradient(-45deg,#36c7f3,#36c7f3 10px,#3dcaf5 0,#3dcaf5 20px)}.Header-module--separatorBottomDark--1NXeZ,.Header-module--separatorTopDark--1etmK{display:block;height:10px;border-top:1px solid rgba(17,17,17,.2);margin:10px 0}.Header-module--separatorTopLight--2v-vk{display:block;height:10px;border-top:1px solid hsla(0,0%,100%,.2);margin:10px 0}.Header-module--separatorBottomLight--2MHyW{display:block;height:10px;border-bottom:1px solid hsla(0,0%,100%,.2);margin-bottom:10px}p{margin:20px 0;line-height:1.7em}*{margin:0}a{text-decoration:none;color:#36c7f3}a:hover{color:#279abd}body{font-size:14px;font-weight:400;line-height:20px;color:#474747}body,h1,h2,h3,h4,h5,h6{font-family:Nunito;font-style:normal;font-variant:normal}h1,h2,h3,h4,h5,h6{font-weight:700}h1{font-size:26px;line-height:26px}h2{font-size:23px;line-height:23px}h3{font-size:20px;line-height:20px}h4{font-size:18px;line-height:18px}h5{font-size:17px;line-height:17px}h6{font-size:15px;line-height:15px}p{font-size:14px;line-height:20px}blockquote,p{font-family:Nunito;font-style:normal;font-variant:normal;font-weight:400}blockquote{font-size:21px;line-height:30px}pre{font-family:Nunito;font-size:13px;font-style:normal;font-variant:normal;font-weight:400;line-height:18.5714px}.Header-module--headerContainer--1T6Fd{flex-grow:0.8;text-align:center;margin-top:100px}.Header-module--headerContainer--1T6Fd ul{list-style-type:none;margin:0;padding:0}.Header-module--headerContainer--1T6Fd a{color:#474747}.Header-module--headerContainer--1T6Fd a:hover{color:#fff}a.Header-module--headerLogo--2Nsjr{display:block;padding:10px}a.Header-module--headerLogo--2Nsjr h1{font-size:35px}a.Header-module--headerLogo--2Nsjr:hover{color:#fff}.Header-module--headerInfo--jqeNh h4{margin-bottom:10px}</style><style data-href="/app.b6f197430f783b3e67aa.css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.0.55"/><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-26280927-2', 'auto', {});
      
      }
      </script><title data-react-helmet="true">Implementing a Bloom filter - Part 2</title><meta data-react-helmet="true" name="description" content="Last time  we talked about what a Bloom filter is and why you might use it. In this post we will cover how Bloom filters work internally and…"/><link as="script" rel="preload" href="/webpack-runtime-b21fbdbad5d0c58e75ff.js"/><link as="script" rel="preload" href="/app-289e6c7c83368adb5b1b.js"/><link as="script" rel="preload" href="/0-85c5a326c0f59adafd80.js"/><link as="script" rel="preload" href="/1-078f37b172f0c8d815c4.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-tsx-96a24fd88e7ebf21f19b.js"/><link rel="preload" href="/static/d/608/path---posts-3-bloom-filter-part-2-f-12-927-1fMzpy4tP7ldrlzZCl325CIPu1o.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><div class="Banner-module--bannerContainer--2kfC_ Banner-module--pattern--30-Rm"><header class="Header-module--headerContainer--1T6Fd"><div><div><a class="Header-module--headerLogo--2Nsjr" href="/"><h1><div><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">o</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">l</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">i</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">v</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">i</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">a</span></span><span style="display:inline-block;width:0.5em"><span class="initial_textAnim_fadeIn_81019"> </span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">i</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">f</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">r</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">i</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_81019">m</span></span></div></h1></a><div class="Header-module--separatorBottomLight--2MHyW"></div><div class="Header-module--headerInfo--jqeNh"><h4> <!-- -->Software Engineer<!-- --> </h4><p> <!-- -->  </p><div class="Header-module--separatorBottomLight--2MHyW"></div><a href="mailto:olivia_github@outlook.com"><p>olivia_github@outlook.com</p></a><div class="Header-module--separatorBottomLight--2MHyW"></div></div></div></div></header><footer class="Footer-module--footerContainer--6amLz Footer-module--pattern--7s7q6"><div class="Footer-module--separatorBottomLight--278Mg"></div><div class="Footer-module--footerInnerContainer--3s6kB undefined"><div>Copyright 2018</div><ul><li class="Footer-module--footerSocialIconsItem--3ocE0"><a href="https://www.linkedin.com/in/oliviaifrim/" title="linkedin" target="_blank"><i class="fab fa-linkedin fa-lg"></i></a></li><li class="Footer-module--footerSocialIconsItem--3ocE0"><a href="https://github.com/iolivia" title="github" target="_blank"><i class="fab fa-github fa-lg"></i></a></li><li class="Footer-module--footerSocialIconsItem--3ocE0"><a href="https://www.quora.com/profile/Olivia-Ifrim" title="quora" target="_blank"><i class="fab fa-quora fa-lg"></i></a></li></ul></div></footer></div><div class="Page-module--pageInnerContainer--3yRDU"><div></div><div class="blog-post-module--contentContainer--1x_eD"><div class="blog-post-module--postContainer--ggIbM"><div><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:42.857142857142854%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABcBAAMBAAAAAAAAAAAAAAAAAAECAwT/2gAMAwEAAhADEAAAAanJ1nMYssv/xAAaEAACAgMAAAAAAAAAAAAAAAACIQABMkFC/9oACAEBAAEFAgUu0RPjZ5//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAEC/9oACAECAQE/AdI//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAEQEiH/2gAIAQEABj8C1OCjP//EABwQAAICAgMAAAAAAAAAAAAAAAABESFRYaGxwf/aAAgBAQABPyHKSlWiehZhGmzvPByT/9oADAMBAAIAAwAAABAvD//EABcRAAMBAAAAAAAAAAAAAAAAAAABITH/2gAIAQMBAT8QwNU//8QAFxEBAQEBAAAAAAAAAAAAAAAAAREAIf/aAAgBAgEBPxBNtw4b/8QAHRABAAICAgMAAAAAAAAAAAAAAQARITFBsWGh8P/aAAgBAQABPxCzuMijD5gGKrc2TgGNOgzrdw3+bnv5/9k=" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/75564edf5f5b9ef511f2982eb72e898e/cb2d9/bloom-flower-2.jpg 175w,
/static/75564edf5f5b9ef511f2982eb72e898e/7e73d/bloom-flower-2.jpg 350w,
/static/75564edf5f5b9ef511f2982eb72e898e/81388/bloom-flower-2.jpg 688w" sizes="(max-width: 688px) 100vw, 688px" /><img src="/static/75564edf5f5b9ef511f2982eb72e898e/81388/bloom-flower-2.jpg" alt="" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="blog-post-module--postTitle--3IOzu"><div class="blog-post-module--separatorTopDark--Wpqct"></div><h1>Implementing a Bloom filter - Part 2</h1><div class="blog-post-module--separatorBottomDark--3bOfd"></div></div><div class="blog-post-module--postMetadata--1y-Hj"><div class="blog-post-module--author--1ftr1">by <a href="/">olivia ifrim</a> on <!-- -->May 23, 2017</div><div><ul class="blog-post-module--tagsList--2q3wX"><li> <!-- --> •<!-- --> <!-- -->bloom filter</li><li> <!-- --> •<!-- --> <!-- -->bloom</li><li> <!-- --> •<!-- --> <!-- -->cpp</li><li> <!-- --> •<!-- --> <!-- -->c++</li></ul></div></div><div class="blog-post-module--separatorBottomDark--3bOfd"></div><div class="blog-post-module--postContent--38jG5"><div><p><a href="/posts/2-bloom-filter-part-1/">Last time</a> we talked about what a Bloom filter is and why you might use it. In this post we will cover how Bloom filters work internally and how they achieve constant time lookups. </p>
<p>We start off with an array of bits of a fixed size <code class="language-text">n</code> (where <code class="language-text">n</code> is dependent on the number of inserts we plan to make) which we initialize to zeroes. We will also need a list of <code class="language-text">k</code> hashing functions. Each hashing function needs to map to an index into our array, so <code class="language-text">0</code> -> <code class="language-text">n-1</code>. It's important we pick uniformly distributed and different hashing functions, and we'll see in a minute why. </p>
<p>For this example we'll take <code class="language-text">n = 10</code> and <code class="language-text">k = 3</code>.</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">// Start off with our array of zeroes</span>
<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span></code></pre></div>
<p>Now, let's see what putting an element does internally.</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span> 

<span class="token comment">// We take "A" and apply all k hashing functions to it</span>
<span class="token function">k1</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">0</span>
<span class="token function">k2</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">2</span>
<span class="token function">k3</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">9</span>

<span class="token comment">// Now we set all those bits to 1</span>
<span class="token comment">// Note that we read the bits from the left, since we are </span>
<span class="token comment">// talking about an array of single bits, not bits in a byte.</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span></code></pre></div>
<p>Now let's do some queries.</p>
<p>First let's query for an element which is there. We expect true here.</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token function">isMaybePresent</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span> 

<span class="token comment">// We take "A" and apply all k hashing functions to it (again)</span>
<span class="token function">k1</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">0</span>
<span class="token function">k2</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">2</span>
<span class="token function">k3</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">9</span>

<span class="token comment">// Now we check those bits in our array.</span>
<span class="token comment">// If we have at least one bit which is not set (0), we return false.</span>
<span class="token comment">// If all bits are set (1), we return true.</span>
<span class="token comment">// In this case, the bits are set, so we return true.</span>
<span class="token boolean">true</span></code></pre></div>
<p>Now let's query for an element which we know is not there. We expect false here <em>most of the time</em>.</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token function">isMaybePresent</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span> 

<span class="token comment">// We take "D" and apply all k hashing functions to it</span>
<span class="token function">k1</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">4</span>
<span class="token function">k2</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">7</span>
<span class="token function">k3</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">0</span>

<span class="token comment">// In this case</span>
<span class="token comment">// 4 is not set</span>
<span class="token comment">// 7 is not set</span>
<span class="token comment">// 0 is set (it was set by putting "A" in)</span>
<span class="token comment">// So we have at least one bit which is not set, so we return false.</span>
<span class="token boolean">false</span></code></pre></div>
<p>OK this makes sense but why can't we say for sure the element is there? When could we query for <code class="language-text">&quot;D&quot;</code> without ever inserting it into the Bloom filter and get true? Let's put another element in.</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span> 

<span class="token comment">// We take "B" and apply all k hashing functions to it</span>
<span class="token function">k1</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">7</span>
<span class="token function">k2</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">3</span>
<span class="token function">k3</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">4</span>

<span class="token comment">// Now we set all those bits to 1</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span></code></pre></div>
<p>Now let's query for <code class="language-text">&quot;D&quot;</code> again. </p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token function">isMaybePresent</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span> 

<span class="token comment">// We take "D" and apply all k hashing functions to it</span>
<span class="token function">k1</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">4</span>
<span class="token function">k2</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">7</span>
<span class="token function">k3</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token number">0</span>

<span class="token comment">// In this case</span>
<span class="token comment">// 4 is set (it was set by putting "B" in)</span>
<span class="token comment">// 7 is set (it was set by putting "B" in)</span>
<span class="token comment">// 0 is set (it was set by putting "A" in)</span>
<span class="token comment">// All the bits are now set, so we return true.</span>
<span class="token boolean">true</span></code></pre></div>
<p>So the bits corresponding to hashing <code class="language-text">&quot;D&quot;</code> were actually set by putting <code class="language-text">&quot;A&quot;</code> and <code class="language-text">&quot;B&quot;</code> in. This is why we got the false positive. </p>
<p>This example was deliberately constructed to produce this result, but in reality for a large bloom filter with more hashing functions, the probability of this hapenning is much lower (although it does happen). Tweaking <code class="language-text">n</code> and <code class="language-text">k</code> will produce different false positive rates.</p>
<p>So let's recap what the logic of the Bloom filter is.</p>
<p>Putting an element into the Bloom filter</p>
<ul>
<li>apply all k hashing functions to input</li>
<li>set all bits defined by the hashing to 1</li>
</ul>
<p>Checking whether an element is present in the Bloom filter</p>
<ul>
<li>apply all k hashing functions to input</li>
<li>if all bits defined by the hashing are set (1) we return true, otherwise we return false</li>
</ul>
<p><a href="/posts/4-bloom-filter-part-3/">Next up</a>, we'll look at how to implement this.</p></div></div><div id="disqus_thread"></div></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-tsx","jsonName":"posts-3-bloom-filter-part-2-f12","path":"/posts/3-bloom-filter-part-2/"};window.dataPath="608/path---posts-3-bloom-filter-part-2-f-12-927-1fMzpy4tP7ldrlzZCl325CIPu1o";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.b6f197430f783b3e67aa.css","/app-289e6c7c83368adb5b1b.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx.4693e37b244965d2842d.css","/component---src-templates-blog-post-tsx-96a24fd88e7ebf21f19b.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx.d777b3883a33667a36bc.css","/component---src-pages-404-tsx-6fbb67e968f2ca1fd5bf.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx.796e7821ee5d5fbaa845.css","/component---src-pages-index-tsx-3f44109062cd83cb1f02.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-tsx-96a24fd88e7ebf21f19b.js" async=""></script><script src="/1-078f37b172f0c8d815c4.js" async=""></script><script src="/0-85c5a326c0f59adafd80.js" async=""></script><script src="/app-289e6c7c83368adb5b1b.js" async=""></script><script src="/webpack-runtime-b21fbdbad5d0c58e75ff.js" async=""></script></body></html>