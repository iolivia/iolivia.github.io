<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/component---src-templates-blog-post-tsx.4693e37b244965d2842d.css">@import url(https://fonts.googleapis.com/css?family=Nunito);@import url(https://use.fontawesome.com/releases/v5.5.0/css/all.css);.blog-post-module--pattern--21yGm{background:repeating-linear-gradient(-45deg,#36c7f3,#36c7f3 10px,#3dcaf5 0,#3dcaf5 20px)}.blog-post-module--separatorBottomDark--3bOfd,.blog-post-module--separatorTopDark--Wpqct{display:block;height:10px;border-top:1px solid rgba(17,17,17,.2);margin:10px 0}.blog-post-module--separatorTopLight--39fTF{display:block;height:10px;border-top:1px solid hsla(0,0%,100%,.2);margin:10px 0}.blog-post-module--separatorBottomLight--340P2{display:block;height:10px;border-bottom:1px solid hsla(0,0%,100%,.2);margin-bottom:10px}.blog-post-module--contentContainer--1x_eD{padding:15px}.blog-post-module--postContainer--ggIbM img{width:100%}.blog-post-module--postContainer--ggIbM h1,.blog-post-module--postContainer--ggIbM h2,.blog-post-module--postContainer--ggIbM h3{margin-top:25px}.blog-post-module--postTitle--3IOzu{text-align:center}.blog-post-module--postTitle--3IOzu h1{margin:15px 0}.blog-post-module--postMetadata--1y-Hj{display:flex;justify-content:space-between}.blog-post-module--postMetadata--1y-Hj a{color:#36c7f3}.blog-post-module--postMetadata--1y-Hj a:hover{color:#474747}.blog-post-module--author--1ftr1{flex-grow:1}.blog-post-module--postContent--38jG5,.blog-post-module--postContent--38jG5 p{text-align:left;line-height:35px;font-size:21px}.blog-post-module--postContent--38jG5 pre{font-size:15px}ul.blog-post-module--tagsList--2q3wX{list-style-type:none}ul.blog-post-module--tagsList--2q3wX li{display:inline-block}.Page-module--pattern--2OMjD{background:repeating-linear-gradient(-45deg,#36c7f3,#36c7f3 10px,#3dcaf5 0,#3dcaf5 20px)}.Page-module--separatorBottomDark--3Z-pL,.Page-module--separatorTopDark--1PJCx{display:block;height:10px;border-top:1px solid rgba(17,17,17,.2);margin:10px 0}.Page-module--separatorTopLight--18HRW{display:block;height:10px;border-top:1px solid hsla(0,0%,100%,.2);margin:10px 0}.Page-module--separatorBottomLight--12LAs{display:block;height:10px;border-bottom:1px solid hsla(0,0%,100%,.2);margin-bottom:10px}.Page-module--pageInnerContainer--3yRDU{margin-left:calc(25% + 100px);margin-right:50px}@media only screen and (max-width:1026px){.Page-module--pageInnerContainer--3yRDU{margin:0 auto}}.Banner-module--pattern--30-Rm{background:repeating-linear-gradient(-45deg,#36c7f3,#36c7f3 10px,#3dcaf5 0,#3dcaf5 20px)}.Banner-module--separatorBottomDark--1VDp2,.Banner-module--separatorTopDark--1c1VX{display:block;height:10px;border-top:1px solid rgba(17,17,17,.2);margin:10px 0}.Banner-module--separatorTopLight--2hymc{display:block;height:10px;border-top:1px solid hsla(0,0%,100%,.2);margin:10px 0}.Banner-module--separatorBottomLight--1HHq1{display:block;height:10px;border-bottom:1px solid hsla(0,0%,100%,.2);margin-bottom:10px}.Banner-module--bannerContainer--2kfC_{width:25%;min-width:250px;padding:25px;display:flex;flex-direction:column;min-height:100vh;position:fixed}@media only screen and (max-width:1026px){.Banner-module--bannerContainer--2kfC_{display:none}}.Footer-module--pattern--7s7q6{background:repeating-linear-gradient(-45deg,#36c7f3,#36c7f3 10px,#3dcaf5 0,#3dcaf5 20px)}.Footer-module--separatorBottomDark--1nsn2,.Footer-module--separatorTopDark--2PN15{display:block;height:10px;border-top:1px solid rgba(17,17,17,.2);margin:10px 0}.Footer-module--separatorTopLight--2adox{display:block;height:10px;border-top:1px solid hsla(0,0%,100%,.2);margin:10px 0}.Footer-module--separatorBottomLight--278Mg{display:block;height:10px;border-bottom:1px solid hsla(0,0%,100%,.2);margin-bottom:10px}.Footer-module--footerContainer--6amLz{background-color:#36c7f3;display:block}.Footer-module--footerContainer--6amLz a{color:#474747}.Footer-module--footerContainer--6amLz a:hover{color:#fff}.Footer-module--footerInnerContainer--3s6kB{display:flex;justify-content:space-between;padding-top:10px}.Footer-module--footerSocialIconsItem--3ocE0{display:inline;margin-left:10px}.Header-module--pattern--2EFLT{background:repeating-linear-gradient(-45deg,#36c7f3,#36c7f3 10px,#3dcaf5 0,#3dcaf5 20px)}.Header-module--separatorBottomDark--1NXeZ,.Header-module--separatorTopDark--1etmK{display:block;height:10px;border-top:1px solid rgba(17,17,17,.2);margin:10px 0}.Header-module--separatorTopLight--2v-vk{display:block;height:10px;border-top:1px solid hsla(0,0%,100%,.2);margin:10px 0}.Header-module--separatorBottomLight--2MHyW{display:block;height:10px;border-bottom:1px solid hsla(0,0%,100%,.2);margin-bottom:10px}p{margin:20px 0;line-height:1.7em}*{margin:0}a{text-decoration:none;color:#36c7f3}a:hover{color:#279abd}body{font-size:14px;font-weight:400;line-height:20px;color:#474747}body,h1,h2,h3,h4,h5,h6{font-family:Nunito;font-style:normal;font-variant:normal}h1,h2,h3,h4,h5,h6{font-weight:700}h1{font-size:26px;line-height:26px}h2{font-size:23px;line-height:23px}h3{font-size:20px;line-height:20px}h4{font-size:18px;line-height:18px}h5{font-size:17px;line-height:17px}h6{font-size:15px;line-height:15px}p{font-size:14px;line-height:20px}blockquote,p{font-family:Nunito;font-style:normal;font-variant:normal;font-weight:400}blockquote{font-size:21px;line-height:30px}pre{font-family:Nunito;font-size:13px;font-style:normal;font-variant:normal;font-weight:400;line-height:18.5714px}.Header-module--headerContainer--1T6Fd{flex-grow:0.8;text-align:center;margin-top:100px}.Header-module--headerContainer--1T6Fd ul{list-style-type:none;margin:0;padding:0}.Header-module--headerContainer--1T6Fd a{color:#474747}.Header-module--headerContainer--1T6Fd a:hover{color:#fff}a.Header-module--headerLogo--2Nsjr{display:block;padding:10px}a.Header-module--headerLogo--2Nsjr h1{font-size:35px}a.Header-module--headerLogo--2Nsjr:hover{color:#fff}.Header-module--headerInfo--jqeNh h4{margin-bottom:10px}</style><style data-href="/app.b6f197430f783b3e67aa.css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.0.55"/><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-26280927-2', 'auto', {});
      
      }
      </script><title data-react-helmet="true">Implementing a Bloom filter - Part 1</title><meta data-react-helmet="true" name="description" content="In this series we will implement a very simple Bloom filter in c++.  But first things first. What&#x27;s a Bloom filter?  Simply put, a Bloomâ€¦"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-b21fbdbad5d0c58e75ff.js"/><link as="script" rel="preload" href="/app-289e6c7c83368adb5b1b.js"/><link as="script" rel="preload" href="/0-85c5a326c0f59adafd80.js"/><link as="script" rel="preload" href="/1-078f37b172f0c8d815c4.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-tsx-96a24fd88e7ebf21f19b.js"/><link rel="preload" href="/static/d/844/path---posts-2-bloom-filter-part-1-11-f-598-D79grgEVp6ZoiwdYsAxqXCYyio.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><div class="Banner-module--bannerContainer--2kfC_ Banner-module--pattern--30-Rm"><header class="Header-module--headerContainer--1T6Fd"><div><div><a class="Header-module--headerLogo--2Nsjr" href="/"><h1><div><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">o</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">l</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">i</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">v</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">i</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">a</span></span><span style="display:inline-block;width:0.5em"><span class="initial_textAnim_fadeIn_93609"> </span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">i</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">f</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">r</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">i</span></span><span style="display:inline-block;width:auto"><span class="initial_textAnim_fadeIn_93609">m</span></span></div></h1></a><div class="Header-module--separatorBottomLight--2MHyW"></div><div class="Header-module--headerInfo--jqeNh"><h4> <!-- -->Software Engineer<!-- --> </h4><p> <!-- -->  </p><div class="Header-module--separatorBottomLight--2MHyW"></div><a href="mailto:olivia_github@outlook.com"><p>olivia_github@outlook.com</p></a><div class="Header-module--separatorBottomLight--2MHyW"></div></div></div></div></header><footer class="Footer-module--footerContainer--6amLz Footer-module--pattern--7s7q6"><div class="Footer-module--separatorBottomLight--278Mg"></div><div class="Footer-module--footerInnerContainer--3s6kB undefined"><div>Copyright 2018</div><ul><li class="Footer-module--footerSocialIconsItem--3ocE0"><a href="https://www.linkedin.com/in/oliviaifrim/" title="linkedin" target="_blank"><i class="fab fa-linkedin fa-lg"></i></a></li><li class="Footer-module--footerSocialIconsItem--3ocE0"><a href="https://github.com/iolivia" title="github" target="_blank"><i class="fab fa-github fa-lg"></i></a></li><li class="Footer-module--footerSocialIconsItem--3ocE0"><a href="https://www.quora.com/profile/Olivia-Ifrim" title="quora" target="_blank"><i class="fab fa-quora fa-lg"></i></a></li></ul></div></footer></div><div class="Page-module--pageInnerContainer--3yRDU"><div></div><div class="blog-post-module--contentContainer--1x_eD"><div class="blog-post-module--postContainer--ggIbM"><div><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div style="width:100%;padding-bottom:42.857142857142854%"></div><img src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAMBAgQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgED/9oADAMBAAIQAxAAAAHosXOVzlRn/8QAGRAAAgMBAAAAAAAAAAAAAAAAASEAAjJC/9oACAEBAAEFAqqEol8y2v/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/AWf/xAAXEAADAQAAAAAAAAAAAAAAAAAAARAR/9oACAEBAAY/AtqjP//EABoQAAICAwAAAAAAAAAAAAAAAAARAUEQYaH/2gAIAQEAAT8h0YYwVIWKzoP/2gAMAwEAAgADAAAAEBM//8QAFREBAQAAAAAAAAAAAAAAAAAAAQD/2gAIAQMBAT8QJL//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/ELolh//EAB0QAAICAQUAAAAAAAAAAAAAAAEhABExEEFxscH/2gAIAQEAAT8QawAFisxADTdiNKbgnBnaIM+PdE//2Q==" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition:opacity 0.5s;transition-delay:0.25s"/><noscript><picture><source srcSet="/static/00364c1a00ba71b2f933500d3c005f7f/cb2d9/bloom-flower-1.jpg 175w,
/static/00364c1a00ba71b2f933500d3c005f7f/7e73d/bloom-flower-1.jpg 350w,
/static/00364c1a00ba71b2f933500d3c005f7f/81388/bloom-flower-1.jpg 688w" sizes="(max-width: 688px) 100vw, 688px" /><img src="/static/00364c1a00ba71b2f933500d3c005f7f/81388/bloom-flower-1.jpg" alt="" style="position:absolute;top:0;left:0;transition:opacity 0.5s;transition-delay:0.5s;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div><div class="blog-post-module--postTitle--3IOzu"><div class="blog-post-module--separatorTopDark--Wpqct"></div><h1>Implementing a Bloom filter - Part 1</h1><div class="blog-post-module--separatorBottomDark--3bOfd"></div></div><div class="blog-post-module--postMetadata--1y-Hj"><div class="blog-post-module--author--1ftr1">by <a href="/">olivia ifrim</a> on <!-- -->May 22, 2017</div><div><ul class="blog-post-module--tagsList--2q3wX"><li>Â <!-- --> â€¢<!-- -->Â <!-- -->bloom filter</li><li>Â <!-- --> â€¢<!-- -->Â <!-- -->bloom</li><li>Â <!-- --> â€¢<!-- -->Â <!-- -->cpp</li><li>Â <!-- --> â€¢<!-- -->Â <!-- -->c++</li></ul></div></div><div class="blog-post-module--separatorBottomDark--3bOfd"></div><div class="blog-post-module--postContent--38jG5"><div><p>In this series we will implement a very simple Bloom filter in c++. </p>
<p>But first things first. What's a Bloom filter? </p>
<p>Simply put, a Bloom filter is a data structure used for doing lookups of items in sets. </p>
<ul>
<li>If the result of the lookup is <code class="language-text">false</code>, the item is definitely not in the set</li>
<li>If the result of the lookup is <code class="language-text">true</code>, the item <em>might</em> be in the set</li>
</ul>
<p>Note that the Bloom filter doesn't store the raw data so it's not a replacement for storage. The advantage it offers is a constant time lookup optimized for when items are not present in the set.</p>
<p>Let's take a an example. We'll start by putting some items into the Bloom filter.</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span> 
<span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"B"</span><span class="token punctuation">)</span>
<span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"C"</span><span class="token punctuation">)</span></code></pre></div>
<p>Now let's ask the filter if these items are present</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token function">isMaybePresent</span><span class="token punctuation">(</span><span class="token string">"D"</span><span class="token punctuation">)</span> 
<span class="token boolean">false</span> 
<span class="token comment">// the item is definitely not in the set, and we know this is correct</span>

<span class="token function">isMaybePresent</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span> 
<span class="token boolean">true</span>
<span class="token comment">// the item *might* be present, and we know it is, since we've inserted it</span>

<span class="token function">isMaybePresent</span><span class="token punctuation">(</span><span class="token string">"E"</span><span class="token punctuation">)</span> 
<span class="token boolean">true</span>
<span class="token comment">// the item *might* be present, and we know it's not, since we never inserted it</span>
<span class="token comment">// but it doesn't matter, because we mostly care about when the answer is false</span>
<span class="token comment">// and we can afford a few false positives</span></code></pre></div>
<p>And at this point you might be asking yourself, why would anyone use a Bloom filter when it doesn't actually store any data, and it can only tell you if something is not present or maybe present?</p>
<p>Imagine you are building Medium's recommended articles feature. Your recommendation engine gives you a list of articles which the user might enjoy based on their interests. But the recommendation engine has no state, so in this list you could have articles that the user has already read. In order to filter this list out you could of course make database queries for every article to see if they have been read, but that will be expensive. There must be a better way. </p>
<p><strong>Enter the Bloom filter!</strong>   </p>
<p>What if we kept a Bloom filter for every user with the articles they've read? Querying the Bloom filter is a constant time operation, and we wouldn't need to call the database at all. All we have to do is keep the Bloom filter up to date, so every time a user reads something we insert it into the Bloom filter.</p>
<p>Fun fact, this is actually <a href="https://blog.medium.com/what-are-bloom-filters-1ec2a50c68ff#.xlkqtn1vy">what Medium does</a>. </p>
<p>Bloom filters are widely used for this type of quick filtering when the answer is mostly no. They are also used in <a href="http://archive.is/P6NSg">Chrome</a>, <a href="https://www.akamai.com/jp/ja/multimedia/documents/technical-publication/algorithmic-nuggets-in-content-delivery-technical-publication.pdf">Akamai</a> and <a href="http://www.newsbtc.com/2016/05/10/developers-introduce-bloom-filters-improve-bitcoin-wallet-security/">Bitcoin</a>.</p>
<p>Now that we've seen what Bloom filters can do and why they are useful, we'll look at how they do this in <a href="/posts/3-bloom-filter-part-2/">part 2</a>.</p></div></div><div id="disqus_thread"></div></div></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-tsx","jsonName":"posts-2-bloom-filter-part-1-11f","path":"/posts/2-bloom-filter-part-1/"};window.dataPath="844/path---posts-2-bloom-filter-part-1-11-f-598-D79grgEVp6ZoiwdYsAxqXCYyio";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.b6f197430f783b3e67aa.css","/app-289e6c7c83368adb5b1b.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx.4693e37b244965d2842d.css","/component---src-templates-blog-post-tsx-96a24fd88e7ebf21f19b.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx.d777b3883a33667a36bc.css","/component---src-pages-404-tsx-6fbb67e968f2ca1fd5bf.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx.796e7821ee5d5fbaa845.css","/component---src-pages-index-tsx-3f44109062cd83cb1f02.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-tsx-96a24fd88e7ebf21f19b.js" async=""></script><script src="/1-078f37b172f0c8d815c4.js" async=""></script><script src="/0-85c5a326c0f59adafd80.js" async=""></script><script src="/app-289e6c7c83368adb5b1b.js" async=""></script><script src="/webpack-runtime-b21fbdbad5d0c58e75ff.js" async=""></script></body></html>