{"data":{"site":{"siteMetadata":{"fullName":"olivia ifrim","settings":{"disqusShortName":"oliviaifrim"}}},"markdownRemark":{"id":"10809514-264f-5898-a5d6-d097a54417fe","html":"<p>I recently revamped my personal website to use <a href=\"https://www.gatsbyjs.org/\">Gatsby</a> and I spent a little more than I thought it was necessary to figure out how to deploy it to Github pages as my personal website at the root of <code class=\"language-text\">&lt;username&gt;.github.io</code> so I wanted to share what I did with you so you don't have to spend that extra time reinventing the wheel. </p>\n<p>First, install the <code class=\"language-text\">gh-pages</code> plugin. </p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">npm install gh-pages --save-dev</code></pre></div>\n<p>Add a deploy script to <code class=\"language-text\">package.json</code>. We'll use this script to trigger a deployment from our local command-line to github pages. Note that we are saying we'll be deploying to the <code class=\"language-text\">master</code> branch as enforced by Github.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    ...\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public -b master\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>Now here is where it gets tricky, if we just ran <code class=\"language-text\">npm run deploy</code> at this point what will happen is that this command will build our site and create a new commit which just has the statically built version of the website. This means the source code is buried under this commit and if we want to make updates, well ... we can't. </p>\n<p>So here is what we are doing to do instead:</p>\n<ul>\n<li>master -> we'll use this for publishing only (because we have to) so this will only every have the statically built version</li>\n<li>master-source -> we'll use this for keeping the source code and we'll run <code class=\"language-text\">npm run deploy</code> from it (which will take the code in master-source, build it and push it to master, where github pages will get it from)</li>\n</ul>\n<p>So take the branch you have all your source code in, presumably master, and let's create the <code class=\"language-text\">master-source</code> local and origin branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">git checkout -b master-source\ngit push --set-upstream origin master-source</code></pre></div>\n<p>Now from the master-source branch run this to get your site deployed. </p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">npm run deploy</code></pre></div>\n<p>You should see something like this at the end if all went well.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run deploy\n....\n....\nsuccess Building static HTML for pages — 0.604 s — 9/9 44.66 pages/second\ninfo Done building in 11.112 sec\nPublished</code></pre></div>\n<p>Navigate to <code class=\"language-text\">https://&lt;username&gt;.github.io</code> and everything should be there waiting for you :smile:.</p>\n<p>Let me know if this worked for you or if you found a better way!</p>","frontmatter":{"title":"How to deploy a personal Gatsby site to Github pages","date":"December 01, 2018","tags":["gatsby","github","github pages","gh-pages"],"featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBP/EABcBAAMBAAAAAAAAAAAAAAAAAAABAwT/2gAMAwEAAhADEAAAAeSM420IC//EABkQAQEBAQEBAAAAAAAAAAAAAAECAwASEf/aAAgBAQABBQLLB0nxL1nip0qQpOfq/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAAAIf/aAAgBAwEBPwFX/8QAFREBAQAAAAAAAAAAAAAAAAAAACH/2gAIAQIBAT8Bqv/EABoQAQADAQEBAAAAAAAAAAAAAAEAESECElH/2gAIAQEABj8Cuwir45M+x5mMxlrs/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFBcf/aAAgBAQABPyF0fsgy4HjqKp0jYqJZ4XrLtitWf//aAAwDAQACAAMAAAAQW8//xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPxCj/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPxCW9Kf/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMWFxQVGR/9oACAEBAAE/EB+BdC3WF4Ig8dKli4o6cymlWrNPkfktT3A116gwcIDdo2Ma6VRlVn//2Q==","aspectRatio":2.3333333333333335,"src":"/static/38e401b61a7e7343225339891c87c6a7/5aa81/gatsbyjs-github.jpg","srcSet":"/static/38e401b61a7e7343225339891c87c6a7/25db0/gatsbyjs-github.jpg 175w,\n/static/38e401b61a7e7343225339891c87c6a7/62b24/gatsbyjs-github.jpg 350w,\n/static/38e401b61a7e7343225339891c87c6a7/5aa81/gatsbyjs-github.jpg 700w,\n/static/38e401b61a7e7343225339891c87c6a7/9224d/gatsbyjs-github.jpg 1050w,\n/static/38e401b61a7e7343225339891c87c6a7/ab94d/gatsbyjs-github.jpg 1400w,\n/static/38e401b61a7e7343225339891c87c6a7/19192/gatsbyjs-github.jpg 1914w","sizes":"(max-width: 700px) 100vw, 700px"}}}}}},"pageContext":{"slug":"/posts/7-gatsby-deploy-github/","previous":{"fields":{"slug":"/posts/6-run-length-encoder/"},"frontmatter":{"title":"Encoding - Run length encoder"}},"next":null}}